<div class="img-container">
    <!--Header-->
    <app-header [isWhiteLogo]="true"></app-header>

    <!--Content-->
    <div class="container">

        <!--Principal title-->
        <div class="row">
            <div class="col-12 col-center">
                <h1 class="principal-title">Carta</h1>
            </div>
        </div>

        <!--Business info-->
        <mat-card>
            <div class="row pl-3 justify-content-center">
                <div class="col-lg-5">
                    <p class="title">Juan y Medio</p>
                </div>
                <div class="col-lg-3">
                    <p class="titulo-4">Rango de Precios:</p>
                    <p class="money">$$$$$</p>
                </div>
                <div class="col-lg-4">
                    <p class="titulo-4">Calificaci칩n:</p>
                    <img src="../../../assets/sarten-2.svg" />
                    <img src="../../../assets/sarten-2.svg" />
                    <img src="../../../assets/sarten-2.svg" />
                    <img src="../../../assets/sarten-1.svg" />
                    <img src="../../../assets/sarten-1.svg" />
                </div>
            </div>
        </mat-card>

        <br><br>

        <!--Add section button-->
        <mat-card>
            <button class="btn-add-accordion" mat-stroked-button (click)="addSection()">
                <mat-icon>add_circle</mat-icon>
                A침adir secci칩n
            </button>
        </mat-card>

        <br>

        <form [formGroup]="form">

            <ng-container formArrayName="sections">

                <mat-accordion cdkDropList (cdkDropListDropped)="dropSection($event)">

                    <mat-expansion-panel *ngFor="let section of sections.controls; let i = index" cdkDrag
                        (opened)="panelOpenState = false" hideToggle="true" #toggleIcon>

                        <mat-expansion-panel-header class="disabled-pointer" [formGroup]="section">

                            <mat-panel-title>
                                <button class="btn-delete" mat-stroked-button (click)="deleteSection(i)">
                                    <mat-icon>delete</mat-icon>
                                    Borrar secci칩n
                                </button>
                            </mat-panel-title>

                            <mat-panel-description class="title-description">

                                <label>
                                    {{section.get("title").value}}
                                </label>

                            </mat-panel-description>

                            <mat-panel-description class="title-icon-toggle">
                                <mat-icon *ngIf="!toggleIcon.expanded" class="toggleIcon">expand_more</mat-icon>
                                <mat-icon *ngIf="toggleIcon.expanded" class="toggleIcon">expand_less</mat-icon>
                            </mat-panel-description>

                        </mat-expansion-panel-header>

                        <!--Section Content-->
                        <mat-accordion>
                            <ng-container>
                                <div class="container">

                                    <div class="row pl-5">
                                        <div class="col">
                                            <mat-icon style="font-size: 40px; cursor: pointer;" (click)="addProduct(i)">
                                                add_circle
                                            </mat-icon>
                                        </div>
                                    </div>

                                    <div *ngFor="let product of products(section); let p = index" class="pb-4">

                                        <ng-container [formGroup]="product">

                                            <div class="row pl-5">
                                                <div class="col">
                                                    <mat-form-field appearance="outline">
                                                        <input matInput formControlName="name" type="text">
                                                    </mat-form-field>
                                                </div>
                                            </div>

                                            <div class="row pl-5">

                                                <div class="col-2 col-center">
                                                    <img class="img-responsive" [src]="product.get('imageUrl').value" />

                                                    <button class="btn-accordion" mat-stroked-button>
                                                        <mat-icon>image</mat-icon>
                                                        Cambiar foto
                                                    </button>
                                                </div>

                                                <div class="col-5 pl-5">
                                                    <!-- <p class="parrafo">{{product.description}}</p> -->
                                                    <mat-form-field class="example-full-width" appearance="fill">
                                                        <textarea matInput formControlName="description"
                                                            placeholder="Ex. It makes me feel..."></textarea>
                                                    </mat-form-field>
                                                </div>

                                                <div class="col-3 col-center">
                                                    <!-- <p class="parrafo">$ {{product.price}} c/u</p> -->

                                                    <mat-form-field appearance="outline">
                                                        <input matInput formControlName="price" type="number">
                                                    </mat-form-field>

                                                    <button class="btn-accordion" mat-stroked-button
                                                        (click)="deleteProduct(i, p)">
                                                        <mat-icon>delete</mat-icon>
                                                        Borrar plato
                                                    </button>
                                                </div>

                                            </div>

                                        </ng-container>
                                    </div>
                                </div>
                            </ng-container>
                        </mat-accordion>
                    </mat-expansion-panel>
                </mat-accordion>
            </ng-container>
        </form>
    </div>

    <!--Footer-->
    <app-footer></app-footer>

</div>